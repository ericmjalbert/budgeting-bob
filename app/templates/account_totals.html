{% extends 'base.html' %}

{% block title %}Account Totals{% endblock %}

{% block header %}
<script src='static/js/moment.min.js'></script>
<script src='static/js/Chart.min.js'></script>

<script src="https://www.amcharts.com/lib/4/core.js"></script>
<script src="https://www.amcharts.com/lib/4/charts.js"></script>
<script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>

<script type='text/javascript' src='static/js/account_totals.js'></script>
{% endblock %}

{% block content %}

<div class="card">
  <div class="card-body">
    <h5 class="card-title">Account Totals</h5>
    <ul class="list-group list-group-flush">
      <li class="list-group-item">
          This is the list of accounts and how much money they currently have based on the lastest transactions from: <br/>
        <b>{{ latest_transaction }}</b>
      </li>

      <table class="table table-sm table-hover">
        <thead>
          <tr>
            <th scope="col">Owner</th>
            <th scope="col">Type</th>
            <th scope="col">Description</th>
            <th scope="col">Current Total</th>
          </tr>
        </thead>
        {% for account in accounts %}
        <tbody>
          <tr>
              <td>{{ account["owner"] | capitalize }}</td>
              <td>{{ account["type"] | capitalize }}</td>
              <td>{{ account["description"] | capitalize }}</td>
              <td>{{ "${:,.2f}".format(account["current_total"]) }}</td>
          </tr>
        {% endfor %}
          <hr/>
          <tr class="table-success">
              <td colspan="3">Total Across All Accounts</td>
              <td>{{ "${:,.2f}".format(current_overall_total) }}</td>
          </tr>
        </tbody>
      </table>

      <li class="list-group-item">
        This is the list of accounts and how much money they have over time.
      </li>
      <li class="list-group-item">
        <div id="myChart" style="width:100%; height:500px"></div>
      </li>
    </ul>
  </div>
</div>

{% endblock %}
